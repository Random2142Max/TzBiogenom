# Biogenom API

---

- В разделе TzBiogenom/AllSqlScripts - Можно ознакомится со скриптами использующиеся для работы с БД.
- В разделе TzBiogenom/Диаграмма БД - Можно ознакомится с графическим представлением всей БД, в виде диаграмм.
- В разделе TzBiogenom/BiogenomWebApiProject - Можно ознакомиться с исходным кодом, для реализации связи БД и веб-приложения. С реализованными API контроллерами, для получения API.

---

Я представил, что страница "Индивидуальный отчёт", является оболочкой, которая представляет различную информацию и она будет состоять из 2-ух блоков:
 1) CurrentDailyConsumptions (Текущее суточное потребление - отчёт на основе заполненных нами оценок, с дефицитом и достатком витаминов/нутриентов);
 2) NewConsumptions (Новое суточное потребление с учётом персонализированного набора - отчёт предоставляющий нам восполнение недостающих витаминов/нутриентов, для организма, путём покупки БАД-ов и правильного питания, по рекомендациям)

---

## Описание сущностей, атрибутов и связей БД.

Ниже приведены подробные описания всех основных сущностей БД, их атрибутов и взаимосвязей.

---

### 1. Users (Пользователи)

- **Атрибуты:**
  - `Id` (int, PK, автоинкремент) — уникальный идентификатор пользователя.
  - `Name` (varchar(20)) — имя пользователя.
  - `Genre` (boolean) — пол (true/false) или М/Ж.
  - `DateBirth` (date) — дата рождения.
  - `Height` (int) — рост в сантиметрах.
  - `Weight` (decimal(4,2)) — вес в килограммах.
  - `Email` (varchar(40)) — электронная почта.
  - `PhoneNumber` (varchar(12)) — номер телефона.
  - `PromoCode` (varchar(40), nullable) — промокод.
  - `ConfirmationCode` (int, nullable) — код подтверждения.

- **Связи:**
  - Один пользователь может иметь множество оценок питания (`Assessments`).
  - Один пользователь может оставлять множество отзывов (`Reviews`).

---

### 2. Assessments (Оценки качества питания)

- **Атрибуты:**
  - `Id` (int, PK, автоинкремент) — уникальный идентификатор оценок.
  - `Name` (varchar(100)) — название оценки.
  - `DateTimeOfStart` (datetime) — дата и время начала.
  - `IsEnd` (boolean) — статус завершения.
  - `Id_Users` (int, FK) — ссылка на пользователя.

- **Связи:**
  - Одна оценка принадлежит одному пользователю.
  - Одна оценка может иметь множество записей для текущего суточного потребления (`CurrentDailyConsumptions`).

---

### 3. CurrentDailyConsumptions (Текущее суточное потребление)

- **Атрибуты:**
  - `Id` (int, PK, автоинкремент) — уникальный идентификатор текущего суточного потребления.
  - `DateTimeOfFilling` (datetime) — дата и время заполнения. (По логике, должен будет обновляться, с учётом последних оценок)
  - `Id_Assessments` (int, FK) — ссылка на оценку.

- **Связи:**
  - Каждая запись имеет мн-во различных оценок. (Предполагается, что разные оценки будут влиять на текущее суточное потребление)
  - Каждая запись принадлежит одному новому суточному потреблению (`NewConsumptions`).

---

### 4. Foods (Еда/Продукты)

- **Атрибуты:**
  - `Id` (int, PK, автоинкремент) — уникальный идентификатор еды.
  - `Name` (varchar(100)) — название еды.
  - `QuantityPerDay` (int) — Поле, для заполнения в опроснике (Оценке).
  - `StandardDivisions` (varchar(25)) — стандартные деления, для поля QuantityPerDay (например, "200мл,300мл,500мл").
  - `UnitOfMeasurement` (varchar(5)) — единица измерения. (например, "мл", "г", "кг")
  - `TypeOfFoodSection` (tinyint) — тип секции продукта. (Тут будут реализованы названия секций опросника. Например "Алкоголь - 0", "Молоко - 1" и тд.)

- **Связи:**
  - Связан с нутриентами через таблицу `Foods_Nutrients`.

---

### 5. Nutrients (Питательные вещества/витамины и не только)

- **Атрибуты:**
  - `Id` (int, PK, автоинкремент) — уникальный идентификатор нутриентов.
  - `Name` (varchar(100)) — название нутриента.
  - `ImportanceForHealth` (text) — значение для здоровья.
  - `ManifestationOfDeficit` (text) — проявления дефицита.
  - `Prevention` (text) — меры профилактики.
  - `ConsumptionRecommendations` (text) — рекомендации по потреблению.

- **Связи:**
  - Связан с продуктами через `Foods_Nutrients`.
  - Связан с добавками (БАД-ы) через `Nutrients_Supplements`.

---

### 6. Foods_Nutrients (Связь еды/продуктов и нутриентов)

- **Атрибуты:**
  - `Id` (int, PK, автоинкремент) — уникальный идентификатор для связующей таблицы еды и полезных веществ.
  - `CountNutrients` (decimal(8,2)) — количество нутриента содержащегося в еде.
  - `UnitOfMeasurementNutrients` (varchar(5)) — единица измерения нутриента.
  - `Id_Nutrients` (int, FK) — ссылка на нутриент.
  - `Id_Foods` (int, FK) — ссылка на продукт.

- **Связи:**
  - Каждая запись связывает один продукт с одним нутриентом.

---

### 7. SetNutrients (Наборы нутриентов)

- **Атрибуты:**
  - `Id` (int, PK, автоинкремент) — уникальный идентификатор для связующей таблицы набора нутриентов и физ. активности. (Тут подразумевается, что люди с разной физ. подготовкой имеют разную нужную им норму витаминов, для поддержания себя)
  - `PhysicalActivityLevel` (int) — уровень физической активности.
  - `HighLimitNorm` (decimal(8,2)) — верхний предел нормы.
  - `LowerLimitNorm` (decimal(8,2)) — нижний предел нормы.
  - `Id_Foods_Nutrients` (int, FK) — ссылка на связь продуктов и нутриентов.
  - `Id_PhysicalActivityLevels` (int, FK) — ссылка на уровень активности.

- **Связи:**
  - Связывает нормы потребления нутриентов с уровнями активности.

---

### 8. PhysicalActivityLevels (Уровни физической активности)

- **Атрибуты:**
  - `Id` (int, PK, автоинкремент) — уникальный идентификатор для уровней физ. активности
  - `Name` (varchar(50)) — название уровня.
  - `Description` (varchar(100)) — описание.

- **Связи:**
  - Используется в `SetNutrients`.

---

### 9. Supplements (БАД-ы)

- **Атрибуты:**
  - `Id` (int, PK, автоинкремент) — уникальный идентификатор для БАД-ов
  - `Name` (varchar(50)) — название добавки.
  - `CountNutrients` (decimal(8,2)) — количество нутриентов.
  - `UnitOfMeasurementNutrients` (varchar(5)) — единица измерения.
  - `Description` (text) — описание.
  - `Application` (text) — применение.

- **Связи:**
  - Связан с нутриентами через `Nutrients_Supplements`.
  - Связан с отзывами через `Supplements_Reviews`.

---

### 10. Nutrients_Supplements (Связь нутриентов и БАД-ов)

- **Атрибуты:**
  - `Id` (int, PK, автоинкремент) — уникальный идентификатор для связующей таблицу нутриентов и БАД-ов. (Так как не все БАД-ы имеют только 1 нутриент, а некоторые целый набор витаминов/нутриентов)
  - `Id_Nutrients` (int, FK) — ссылка на нутриент.
  - `Id_Supplements` (int, FK) — ссылка на добавку.

- **Связи:**
  - Связывает нутриенты и добавки.

---

### 11. NewConsumptions (Новое суточное потребление с учётом персонализированного набора)

- **Атрибуты:**
  - `Id` (int, PK, автоинкремент) — уникальный идентификатор для нового суточного потребления
  - `Id_CurrentDailyConsumptions` (int, FK) — ссылка на текущее суточное потребление.
  - `Id_Nutrients_Supplements` (int, FK) — ссылка на связь нутриентов и добавок (БАД-ов).

- **Связи:**
  - Связывает дневные потребления с нутриентами и добавками.

---

### 12. Reviews (Отзывы)

- **Атрибуты:**
  - `Id` (int, PK, автоинкремент) — уникальный идентификатор для отзыва
  - `Text` (text) — текст отзыва.
  - `DateTime` (date) — дата отзыва.
  - `Id_Users` (int, FK) — ссылка на пользователя.

- **Связи:**
  - Отзыв принадлежит одному пользователю.
  - Связан с добавками через `Supplements_Reviews`, для отображения мн-ва отзывов под товаром.

---

### 13. Supplements_Reviews (Связь БАД-ов и отзывов)

- **Атрибуты:**
  - `Id` (int, PK, автоинкремент) — уникальный идентификатор для связующей таблицы, которая хранит в себе все ссылки на отзывы, о БАД-ах.
  - `Id_Supplements` (int, FK) — ссылка на добавку.
  - `Id_Reviews` (int, FK) — ссылка на отзыв.

- **Связи:**
  - Связывает отзывы с добавками.

---
